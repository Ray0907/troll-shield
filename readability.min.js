/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/readability-js@1.0.7/src/readability.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var cheerio=require("cheerio"),request=require("request"),helpers=require("./helpers"),encodinglib=require("encoding"),urllib=require("url");function findHTMLCharset(e){var r,t,n,i=e.toString("ascii");return(t=i.match(/<meta\s+http-equiv=["']content-type["'][^>]*?>/i))&&(r=t[0]),r&&(n=r.match(/charset\s?=\s?([a-zA-Z\-0-9]*);?/))&&(n=(n[1]||"").trim().toLowerCase()),n||(t=i.match(/<meta\s+charset=["'](.*?)["']/i))&&(n=(t[1]||"").trim().toLowerCase()),n}function parseContentType(e){if(!e)return{};for(var r,t,n=e.split(";"),i=n.shift(),o=0,a=n.length;o<a;o++)(t=n[o].split("=")).length>1&&"charset"===t[0].trim().toLowerCase()&&(r=t[1]);return{mimeType:(i||"").trim().toLowerCase(),charset:(r||"UTF-8").trim().toLowerCase()}}function readPage(e,r,t){var n,i,o;try{n=helpers.grabArticle(e,r),i=helpers.grabTitle(e),o=helpers.grabMeta(e)}catch(e){return t(e)}n=n||!1,t(null,{title:o.title||i,content:n,excerpt:o.excerpt,document:e})}function readHtml(e,r,t){var n;"string"!=typeof e&&(e=e.toString());try{n=cheerio.load(e)}catch(e){return t(e)}readPage(n,r,t)}function readUrl(e,r,t,n){request(e,r,function(e,r,i){if(e)return n(e);var o=parseContentType(r.headers["content-type"]);"text/html"===o.mimeType&&(o.charset=findHTMLCharset(i)||o.charset),o.charset=(t.overrideEncoding||o.charset||"utf-8").trim().toLowerCase(),o.charset.match(/^utf-?8$/i)||(i=encodinglib.convert(i,"UTF-8",o.charset)),i=i.toString(),t.preprocess?t.preprocess(i,r,o,function(e,t){if(e)return n(e);n(null,r,t)}):n(null,r,i)})}function read(e,r,t){"function"==typeof r&&(t=r,r={});var n=r.encoding,i=r.preprocess,o=r.onlyArticleBody;r.encoding=null,delete r.preprocess,delete r.onlyArticleBody;var a={onlyArticleBody:o};if(e&&"function"==typeof e&&e.html&&e.text)return readPage(e,a,t);var c=urllib.parse(e);-1===["http:","https:","unix:","ftp:","sftp:"].indexOf(c.protocol)?readHtml(e,a,t):readUrl(e,r,{preprocess:i,overrideEncoding:n},function(e,r,n){if(e)return t(e);readHtml(n,a,t)})}exports.debug=function(e){helpers.debug(e)},exports.debug(!1),module.exports=read;
//# sourceMappingURL=/sm/71861b71cdd2cf803a315d9cfe29b0028b0c5dafebe919fb12e127bab2baca5f.map